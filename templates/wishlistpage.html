{% load static %}
{% static "images" as baseUrl %}
<!DOCTYPE html>
<html lang="en">

<head>
	<title>HomeQuest</title>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="description" content="Travello template project">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" type="text/css" href="{% static 'styles/bootstrap4/bootstrap.min.css' %}">
	<link href="{% static 'plugins/font-awesome-4.7.0/css/font-awesome.min.css' %}" rel="stylesheet" type="text/css">
	<link rel="stylesheet" type="text/css" href="{% static 'plugins/OwlCarousel2-2.2.1/owl.carousel.css' %}">
	<link rel="stylesheet" type="text/css" href="{% static 'plugins/OwlCarousel2-2.2.1/owl.theme.default.css' %}">
	<link rel="stylesheet" type="text/css" href="{% static 'plugins/OwlCarousel2-2.2.1/animate.css' %}">
	<link rel="stylesheet" type="text/css" href="{% static '/styles/main_styles.css' %}">
	<link rel="stylesheet" type="text/css" href="{% static 'styles/responsive.css' %}"> 
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.3/css/all.css" integrity="...">
</head>

<body>

	<div class="super_container">

		<!-- Header -->

		<header class="header" style="background-color:rgba(24,24,24,0.6)">
			<div class="container" >
				<div class="row">
					<div class="col">
						<div class="header_content d-flex flex-row align-items-center justify-content-start" >
							<div class="header_content_inner d-flex flex-row align-items-end justify-content-start" >
								<div class="logo"><a href="index.html">HomeQuest</a></div>
								<nav class="main_nav">
									<ul class="d-flex flex-row align-items-start justify-content-start">
										{% if loggedIn %}
											<li><a href="/">Home</a></li>
											<li class="active"><a href="/wishlist">Wishlist</a></li>
											<li><a href="/apartments">Apartments</a></li>
											<li><a href="/logout" >Logout</li>
										{% else %}
										<!--set this button to right-->
											<li style="align:float-right"><a href="/signup">Sign up</a></li>
										{% endif %}
										
									</ul>
								</nav>
								<div class="header_phone ml-auto">Call us: +1 352 XXX XXXX</div>

								<!-- Hamburger -->

								<div class="hamburger ml-auto">
									<i class="fa fa-bars" aria-hidden="true"></i>
								</div>

							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="header_social d-flex flex-row align-items-center justify-content-start">
				<ul class="d-flex flex-row align-items-start justify-content-start">
					<li><a href="#"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li>
					<li><a href="#"><i class="fa fa-facebook" aria-hidden="true"></i></a></li>
					<li><a href="#"><i class="fa fa-twitter" aria-hidden="true"></i></a></li>
					<li><a href="#"><i class="fa fa-dribbble" aria-hidden="true"></i></a></li>
					<li><a href="#"><i class="fa fa-behance" aria-hidden="true"></i></a></li>
					<li><a href="#"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li>
				</ul>
			</div>
		</header>

		<!-- Menu -->

		<div class="menu">
			<div class="menu_header d-flex flex-row align-items-center justify-content-start">
				<div class="menu_logo"><a href="index.html">Travello</a></div>
				<div class="menu_close_container ml-auto">
					<div class="menu_close">
						<div></div>
						<div></div>
					</div>
				</div>
			</div>
			<div class="menu_content">
				<ul>
					{% if loggedIn %}
					<li class="active"><a href="/">Home</a></li>
					<li><a href="/wishlist">Wishlist</a></li>
					<li><a href="/apartments">Apartments</a></li>
					<li><a href="/logout" >Logout</li>
					{% else %}
					<!--set this button to right-->
						<li class="active"><a href="/">Home</a></li>
						<li><a href="/apartments">Apartments</a></li>
						<li style="align:float-right"><a href="/signup">Sign up</a></li>
					{% endif %}
				
				</ul>
			</div>
			<div class="menu_social">
				<div class="menu_phone ml-auto">Call us: +1 352 XXX XXXX</div>
				<ul class="d-flex flex-row align-items-start justify-content-start">
					<li><a href="#"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li>
					<li><a href="#"><i class="fa fa-facebook" aria-hidden="true"></i></a></li>
					<li><a href="#"><i class="fa fa-twitter" aria-hidden="true"></i></a></li>
					<li><a href="#"><i class="fa fa-dribbble" aria-hidden="true"></i></a></li>
					<li><a href="#"><i class="fa fa-behance" aria-hidden="true"></i></a></li>
					<li><a href="#"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li>
				</ul>
			</div>
		</div>
<!-- Home -->
{% if not wishes %}
<div class="home">

	<!-- Home Slider -->
	<div class="home_slider_container">
		<div class="owl-carousel owl-theme home_slider">

			<!-- Slide -->
			<div class="owl-item">
				<div class="background_image"
					style="background-image:url({% static 'images/home_slider.jpg' %})"></div>
				<div class="home_slider_content_container">
					<div class="container">
						<div class="row">
							<div class="col">
								<div class="home_slider_content">
									<div class="home_title">
										<h2>Your wishlist is currently empty.</h2>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
{% else %}
<div class="destinations" id="destinations">
	<div class="container" style="margin-top: 75px;">
		<div class="row destinations_row">
			<div class="col">
				<div class="destinations_container item_grid">
					{% for dest in wishes %}
					<!-- Destination -->
					<div class="destination item">
						<div class="destination_image">
							<img class="Apartmentnamebtn" id="{{dest.ApartmentID}}" style="cursor:pointer; width: 375px; height: 250px; object-fit: cover;" data-toggle="modal" data-target="#popupModal" src="{{dest.Image}}" alt="">
							<!--<div class="spec_offer text-center"><a href="#">Special Offer</a></div>-->
						</div>
						<div class="destination_content">
							<div class="destination_title"><a style="cursor:pointer" data-toggle="modal" data-target="#popupModal" class="Apartmentnamebtn" id="{{dest.ApartmentID}}" >{{dest.Name}}</a>
							</div>
							<div class="destination_subtitle">
								<p style="min-height:55px;">{{dest.Address}}</p>
							</div>
							<div class="destination_price">From ${{dest.Rent}}</div>
						</div>
						<button class="wishlist-btn" id="{{dest.ApartmentID}}" style="display: inline-block; border: none; background: none; font-size: 16px; font-weight: bold; color: #333; cursor: pointer; padding: 0; margin: 0; text-align: left;">
							{% if dest in wishes %}
							<i id="wishlist-icon" style="color: #000; margin-right: 5px;" class="fa fa-heart"></i> Remove from Wishlist
							{% else %}
							<i id="wishlist-icon" style="color: #000; margin-right: 5px;" class="far fa-heart"></i> Add to Wishlist
							{% endif %}
						</button>								  
						  
					</div>
					{% endfor %}
				</div>
			</div>
		</div>
	</div>
</div>
{% endif %}
<div class="modal fade" id="popupModal" tabindex="-1" role="dialog" aria-labelledby="popupModalLabel" aria-hidden="true">
	<div class="modal-dialog modal-lg" role="document">
	  <div class="modal-content">
		<div class="modal-header">
		  <h5 class="modal-title" id="popupModalLabel">Popup Box Title</h5>
		  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
			<span aria-hidden="true">&times;</span>
		  </button>
		</div>
		<div class="modal-body">
			<div class="modal-body">
				<div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
					<div class="carousel-inner">
					  <div class="carousel-item active">
						<img id="popupslide1" class="d-block w-100" src="" style="height: 400px;" alt="First slide">
					  </div>
					  <div class="carousel-item">
						<img id="popupslide2" class="d-block w-100" src=""style="height: 400px;" alt="Second slide">
					  </div>
					  <div class="carousel-item">
						<img id="popupslide3" class="d-block w-100" src=""style="height: 400px;" alt="Third slide">
					  </div>
					  <div class="carousel-item">
						<img id="popupslide4" class="d-block w-100" src=""style="height: 400px;" alt="Fourth slide">
					  </div>
					  <div class="carousel-item">
						<img id="popupslide5" class="d-block w-100" src=""style="height: 400px;" alt="Fifth slide">
					  </div>
					  <div class="carousel-item">
						<img id="popupslide6" class="d-block w-100" src=""style="height: 400px;" alt="Sixth slide">
					  </div>
					  <div class="carousel-item">
						<img id="popupslide7" class="d-block w-100" src=""style="height: 400px;" alt="Seventh slide">
					  </div>
					  <div class="carousel-item">
						<img id="popupslide8" class="d-block w-100" src=""style="height: 400px;" alt="Eighth slide">
					  </div>
					  <div class="carousel-item">
						<img id="popupslide9" class="d-block w-100" src=""style="height: 400px;" alt="Nineth slide">
					  </div>
					  <div class="carousel-item">
						<img id="popupslide10" class="d-block w-100" src=""style="height: 400px;" alt="Tenth slide">
					  </div>
					</div>
					<a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
					  <span class="carousel-control-prev-icon" aria-hidden="true"></span>
					  <span class="sr-only">Previous</span>
					</a>
					<a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
					  <span class="carousel-control-next-icon" aria-hidden="true"></span>
					  <span class="sr-only">Next</span>
					</a>
				  </div>
				  
				<h2 id = 'popup-title'></h2>
				<div id="carouselcontent">
					<p id="contentaddress"></p>
					<p id="contentfeatures"></p>
					<p id="contentbeds"></p>
					<p id="contentrent"></p>
					<p id="contentarea"></p>
				</div>
				
			  </div>
			  
		</div>
	  </div>
	</div>
  </div>

<div id="confirmpopup" style="display:none; position:fixed; z-index:1; left:0; top:0; width:100%; height:100%; background-color:rgba(0,0,0,0.5);">
    <div style="background-color:#fefefe; margin:auto; padding:10px; border:1px solid #888; width:40%; max-width:400px; text-align:center; position:absolute; top:50%; left:50%; transform:translate(-50%, -50%);">
      <span style="color:#aaa; position:absolute; top:0px; right:10px; font-size:20px; font-weight:bold; cursor:pointer;" onclick="document.getElementById('confirmpopup').style.display='none';">&times;</span>
     <h3>Home Quest says</h3> 
      <h6 id="cnfrmpopupcontent"></h6>
      <button id="okButton" class="home_search_button float-right" style="width:70px;height:25px;font-size:13px">ok</button>
      <button id="cancelButton" class="home_search_button float-right" style="width:70px;height:25px;font-size:13px;margin-right:10px">cancel</button>
    </div>
  </div>
		

<script src="{% static 'js/jquery-3.2.1.min.js' %}"></script>
<script src="{% static 'styles/bootstrap4/popper.js' %}"></script>
<script src="{% static 'styles/bootstrap4/bootstrap.min.js' %}"></script>
<script src="{% static 'plugins/OwlCarousel2-2.2.1/owl.carousel.js' %}"></script>
<script src="{% static 'plugins/Isotope/isotope.pkgd.min.js' %}"></script>
<script src="{% static 'plugins/scrollTo/jquery.scrollTo.min.js' %}"></script>
<script src="{% static 'plugins/easing/easing.js' %}"></script>
<script src="{% static 'plugins/parallax-js-master/parallax.min.js' %}"></script>
<script src="{% static 'js/custom.js' %}"></script>
</body>
</html>

<script>
$(document).ready(function() {
    $('.wishlist-btn').click(function() {
        debugger
        var itemId = $(this).attr('id');
        $('#confirmpopup').show();
			$('#confirmpopup #cnfrmpopupcontent').html("");
			$('#confirmpopup #cnfrmpopupcontent').html("Are you sure you want to remove this apartment from wishlist?");
			$('#okButton').click(function() {
				$.ajax({
                    type: "POST",
                    url: "/addToWishlist",
                    data: {
                        'aptID': itemId,
                        csrfmiddlewaretoken: '{{ csrf_token }}'
                    },
                    success: function(response) {
                        window.location.reload();
                        //alert("Logged in successfully!");
                    },
                    error: function(xhr, status, error) {
                        alert("An error occurred while removing from wishlist.");
                    }
                });
			});
			$('#cancelButton').click(function() {
				$('#confirmpopup').css("display","none");
			});
});
$('.Apartmentnamebtn').click(function() {
	debugger
	var apartmentslist = [];

{% for apartment in apartmentlist %}
  var listObj = {
		"ApartmentID": "{{ apartment.ApartmentID }}",
		"Name": "{{ apartment.Name|escapejs }}",
		"Type": "{{ apartment.Type|escapejs }}",
		"Address": "{{ apartment.Address|escapejs }}",
		"Image": "{{ apartment.Image|escapejs }}",
		"Beds": "{{ apartment.Beds }}",
		"Bath": "{{ apartment.Bath }}",
		"Rent": "{{ apartment.Rent }}",
		"Area": "{{ apartment.Area }}",
		"Furnished": "{{ apartment.Furnished|yesno:"true,false" }}",
		"Parking": "{{ apartment.Parking|yesno:"true,false" }}",
		"Pool": "{{ apartment.Pool|yesno:"true,false" }}",
		"Gatedcommunity": "{{ apartment.Gatedcommunity|yesno:"true,false" }}",
		"Patio": "{{ apartment.Patio|yesno:"true,false" }}",
		"Garden": "{{ apartment.Garden|yesno:"true,false" }}",
		"HardwoodFloors": "{{ apartment.HardwoodFloors|yesno:"true,false" }}",
		"Gym": "{{ apartment.Gym|yesno:"true,false" }}",
		"DisabilityAccess": "{{ apartment.DisabilityAccess|yesno:"true,false" }}",
		"Kidfriendly": "{{ apartment.Kidfriendly|yesno:"true,false" }}",
		"Washerdryer": "{{ apartment.Washerdryer|yesno:"true,false" }}",
		"Dishwasher": "{{ apartment.Dishwasher|yesno:"true,false" }}",
		"Radius": "{{ apartment.Radius }}",
	};
  apartmentslist.push(listObj);
{% endfor %}
	
	console.log(apartmentslist);
	var itemId = $(this).attr('id');
	var baseUrl = "{% static 'images/' %}";
	var numImages = 10;
	for (var i = 1; i <= numImages; i++) {
	    var imageUrl = baseUrl + "apartment_" + itemId + i + ".jpg";
	    $('#popupslide' + i).attr('src', imageUrl);
	}
	//$("#carouselcontent").html();
	
	$("#popupModalLabel").empty();
	$("#popupModalLabel").html(apartmentslist[itemId-1].Name);
	$("#popup-title").empty();
	$("#popup-title").html(apartmentslist[itemId-1].Name);
	$("#contentaddress").empty();
	$("#contentaddress").html(apartmentslist[itemId-1].Address);
	$("#contentbeds").empty();
	$("#contentbeds").html("Number of Beds: "+apartmentslist[itemId-1].Beds);
	$("#contentrent").empty();
	$("#contentrent").html("Rent: " + apartmentslist[itemId-1].Rent);
	$("#contentarea").empty();
	$("#contentarea").html("Area: "+apartmentslist[itemId-1].Area);
	var amenities = "";
	if (apartmentslist[itemId-1].DisabilityAccess == "true") {
		amenities += "Disability Access, ";
	}
	if (apartmentslist[itemId-1].Dishwasher == "true") {
		amenities += "Dishwasher, ";
	}
	if (apartmentslist[itemId-1].Furnished == "true") {
		amenities += "Furnished, ";
	}
	if (apartmentslist[itemId-1].Garden == "true") {
		amenities += "Garden, ";
	}
	if (apartmentslist[itemId-1].Gatedcommunity == "true") {
		amenities += "Gated Community, ";
	}
	if (apartmentslist[itemId-1].Gym == "true") {
		amenities += "Gym, ";
	}
	if (apartmentslist[itemId-1].HardwoodFloors == "true") {
		amenities += "Hardwood Floors, ";
	}
	if (apartmentslist[itemId-1].Kidfriendly == "true") {
		amenities += "Kid Friendly, ";
	}
	if (apartmentslist[itemId-1].Parking == "true") {
		amenities += "Parking, ";
	}
	if (apartmentslist[itemId-1].Patio == "true") {
		amenities += "Patio, ";
	}
	if (apartmentslist[itemId-1].Pool == "true") {
		amenities += "Pool, ";
	}
	if (apartmentslist[itemId-1].Washerdryer == "true") {
		amenities += "Washer/Dryer, ";
	}

	// remove the last comma and space from the string
	amenities = amenities.slice(0, -2);
	$("#contentfeatures").empty();
	$("#contentfeatures").html("Features: " + amenities);
	
	//$("#carouselcontent").html("<p>FEATURES: LARGE SUN-DECK, PET-FRIENDLY APARTMENTS, BILLIARDS ROOM, RESORT-STYLE SWIMMING POOL, Pets Allowed,2 pet max, Kids Friendly, disability accessible parking, Organizable Walk-In Closets, Contemporary Ceiling Fans in Every Room, Customizable thermostat");
	//$("#carouselcontent").html("<p>BEDS / BATHS: 2 bd 2 ba</p>");
	//$("#carouselcontent").html("<p>RENT/month: $1,269</p>");
	//$("#carouselcontent").html("<p>Area_in_SQ FT: 421</p>");
	});
});
</script>